<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>nie-frontend documentation</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="icon" type="image/x-icon" href="../images/favicon.ico">
	      <link rel="stylesheet" href="../styles/style.css">
    </head>
    <body>

        <div class="navbar navbar-default navbar-fixed-top visible-xs">
            <a href="../" class="navbar-brand">nie-frontend documentation</a>
            <button type="button" class="btn btn-default btn-menu ion-ios-menu" id="btn-menu"></button>
        </div>

        <div class="xs-menu menu" id="mobile-menu">
                <div id="book-search-input" role="search"><input type="text" placeholder="Type to search"></div>            <compodoc-menu></compodoc-menu>
        </div>

        <div class="container-fluid main">
           <div class="row main">
               <div class="hidden-xs menu">
                   <compodoc-menu mode="normal"></compodoc-menu>
               </div>
               <!-- START CONTENT -->
               <div class="content component">
                   <div class="content-data">




<ol class="breadcrumb">
  <li>Components</li>
  <li>MinimizePasswordDialog</li>
</ol>

<ul class="nav nav-tabs" role="tablist">
        <li class="active">
            <a href="#info" role="tab" id="info-tab" data-toggle="tab" data-link="info">Info</a>
        </li>
        <li >
            <a href="#source" role="tab" id="source-tab" data-toggle="tab" data-link="source">Source</a>
        </li>
        <li >
            <a href="#templateData" role="tab" id="templateData-tab" data-toggle="tab" data-link="template">Template</a>
        </li>
        <li >
            <a href="#tree" role="tab" id="tree-tab" data-toggle="tab" data-link="dom-tree">DOM Tree</a>
        </li>
</ul>

<div class="tab-content">
    <div class="tab-pane fade active in" id="c-info"><p class="comment">
    <h3>File</h3>
</p>
<p class="comment">
    <code>src/app/app-engine/page/page/page.component.ts</code>
</p>





<section>
    <h3>Metadata</h3>
    <table class="table table-sm table-hover">
        <tbody>











            <tr>
                <td class="col-md-3">selector</td>
                <td class="col-md-9"><code>minimize-password-dialog</code></td>
            </tr>




            <tr>
                <td class="col-md-3">templateUrl</td>
                <td class="col-md-9"><code>minimize-password-dialog.html</code></td>
            </tr>








        </tbody>
    </table>
</section>

    <section>
    <h3 id="index">Index</h3>
    <table class="table table-sm table-bordered index-table">
        <tbody>
                <tr>
                    <td class="col-md-4">
                        <h6><b>Properties</b></h6>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <ul class="index-list">
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#data">data</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#dialogRef">dialogRef</a>
                            </li>
                        </ul>
                    </td>
                </tr>

                <tr>
                    <td class="col-md-4">
                        <h6><b>Methods</b></h6>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <ul class="index-list">
                            <li>
                                <a href="#continueWithoutPassword">continueWithoutPassword</a>
                            </li>
                            <li>
                                <a href="#openApp">openApp</a>
                            </li>
                            <li>
                                <a href="#submit">submit</a>
                            </li>
                        </ul>
                    </td>
                </tr>





        </tbody>
    </table>
</section>

    <section>
    <h3 id="constructor">Constructor</h3>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
<code>constructor(dialogRef: <a href="../components/MinimizePasswordDialog.html">MatDialogRef<MinimizePasswordDialog></a>, data: literal type)</code>
                    </td>
                </tr>
                        <tr>
                            <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="1665" class="link-to-prism">src/app/app-engine/page/page/page.component.ts:1665</a></div>
                            </td>
                        </tr>

                <tr>
                    <td class="col-md-4">
                            <div>
                                    <b>Parameters :</b>
                                    <table class="params">
                                        <thead>
                                            <tr>
                                                <td>Name</td>
                                                    <td>Type</td>
                                                <td>Optional</td>
                                            </tr>
                                        </thead>
                                        <tbody>
                                                <tr>
                                                        <td>dialogRef</td>
                                                  
                                                        <td>
                                                                        <code><a href="../components/MinimizePasswordDialog.html" target="_self" >MatDialogRef&lt;MinimizePasswordDialog&gt;</a></code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                </tr>
                                                <tr>
                                                        <td>data</td>
                                                  
                                                        <td>
                                                                    <code>literal type</code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                </tr>
                                        </tbody>
                                    </table>
                            </div>
                    </td>
                </tr>
            </tbody>
        </table>
</section>





    <section>
    
    <h3 id="methods">
        Methods
    </h3>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="continueWithoutPassword"></a>
                    <span class="name">
                        <b>
                            continueWithoutPassword
                        </b>
                        <a href="#continueWithoutPassword"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>continueWithoutPassword()</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="1681"
                            class="link-to-prism">src/app/app-engine/page/page/page.component.ts:1681</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="openApp"></a>
                    <span class="name">
                        <b>
                            openApp
                        </b>
                        <a href="#openApp"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>openApp()</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="1685"
                            class="link-to-prism">src/app/app-engine/page/page/page.component.ts:1685</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="submit"></a>
                    <span class="name">
                        <b>
                            submit
                        </b>
                        <a href="#submit"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>submit()</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="1676"
                            class="link-to-prism">src/app/app-engine/page/page/page.component.ts:1676</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</section>
    <section>
    
        <h3 id="inputs">
            Properties
        </h3>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="data"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Public</span>
                            data</b>
                            <a href="#data"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>    <code>literal type</code>

                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4">
                            <b>Decorators : </b>
                            <br />
                            <code>
                                @Inject(MAT_DIALOG_DATA)<br />
                            </code>
                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="1669" class="link-to-prism">src/app/app-engine/page/page/page.component.ts:1669</a></div>
                            </td>
                        </tr>


            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="dialogRef"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Public</span>
                            dialogRef</b>
                            <a href="#dialogRef"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>        <code><a href="../components/MinimizePasswordDialog.html" target="_self" >MatDialogRef&lt;MinimizePasswordDialog&gt;</a></code>

                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="1668" class="link-to-prism">src/app/app-engine/page/page/page.component.ts:1668</a></div>
                            </td>
                        </tr>


            </tbody>
        </table>
</section>

</div>


    <div class="tab-pane fade  tab-source-code" id="c-source">
        <pre class="line-numbers compodoc-sourcecode"><code class="language-typescript">import {AfterViewChecked, ChangeDetectorRef, Component, HostListener, Inject, NgModule, OnInit, VERSION, ViewChild} from &#x27;@angular/core&#x27;;
import {DomSanitizer} from &#x27;@angular/platform-browser&#x27;;
import &#x27;rxjs/add/operator/map&#x27;;
import {ActivatedRoute, Router} from &#x27;@angular/router&#x27;;
import {GenerateHashService} from &#x27;../../../user-action-engine/other/generateHash.service&#x27;;
import {OpenAppsModel} from &#x27;../../../user-action-engine/mongodb/page/open-apps.model&#x27;;
import {PageService} from &#x27;../../../user-action-engine/mongodb/page/page.service&#x27;;
import { DataManagementComponent } from &#x27;../../../query-app-interface/data-management/data-management/data-management.component&#x27;;
import { NgxSpinnerService } from &#x27;ngx-spinner&#x27;;
import {GeneralRequestService} from &#x27;../../../query-engine/general/general-request.service&#x27;;
import {QueryInformationDialogComponent} from &#x27;../query-information-dialog/query-information-dialog.component&#x27;;
import {StyleMappingService} from &#x27;../../../query-app-interface/services/style-mapping-service&#x27;;
import {Observable, Subscription} from &#x27;rxjs&#x27;;
import {COMMA, ENTER} from &#x27;@angular/cdk/keycodes&#x27;;
import {ActionService} from &#x27;../../../user-action-engine/mongodb/action/action.service&#x27;;
import {MatPaginator} from &#x27;@angular/material/paginator&#x27;;
import {MatSort} from &#x27;@angular/material/sort&#x27;;
import {MatTableDataSource} from &#x27;@angular/material/table&#x27;;
import { AppMenuModel } from &#x27;./appMenu.model&#x27;;
import {ExtendSessionComponent, PizzaPartyComponent} from &#x27;../../../user-action-engine/header/header.component&#x27;;
import {AuthService} from &#x27;../../../user-action-engine/mongodb/auth/auth.service&#x27;;
import {QueryService} from &#x27;../../../user-action-engine/mongodb/query/query.service&#x27;;
import { environment } from &#x27;../../../../environments/environment&#x27;;
import {DialogCreateNewPageComponent} from &#x27;../../../user-action-engine/page-set/page-set-landing-page/page-set-landing-page.component&#x27;;
import {AppInputComponentComponent} from &#x27;../app-input-component/app-input-component.component&#x27;;
import {AddAppGroupDialogComponent} from &#x27;../add-app-group-dialog/add-app-group-dialog.component&#x27;;
import {DataAssignmentComponent} from &#x27;../../../query-app-interface/data-management/data-assignment/data-assignment.component&#x27;;
import {FormControl, FormGroup, Validators} from &#x27;@angular/forms&#x27;;
import {PageListDialogComponent} from &#x27;../page-list-dialog/page-list-dialog.component&#x27;;
import {OverlayContainer} from &#x27;@angular/cdk/overlay&#x27;;
import {PageSetService} from &#x27;../../../user-action-engine/mongodb/pageset/page-set.service&#x27;;
import {SubPageOfPageModel} from &#x27;../../../user-action-engine/mongodb/page/subPageOfPage.model&#x27;;
import {NestedMenu} from &#x27;../menu-item/nested-menu&#x27;;
import {MatDialog, MatDialogRef, MAT_DIALOG_DATA} from &#x27;@angular/material/dialog&#x27;;

import {MatSnackBar} from &#x27;@angular/material/snack-bar&#x27;;
import {GenerateDataChoosersService} from &#x27;../../../query-app-interface/data-management/services/generate-data-choosers.service&#x27;;
import {HttpClient} from &#x27;@angular/common/http&#x27;;

@Component({
  selector: &#x27;nie-os&#x27;,
  templateUrl: &#x60;page.component.html&#x60;,
  providers: [StyleMappingService]
})
export class PageComponent implements OnInit, AfterViewChecked {

  /**
   * Needed for the inseri page menu, this array indicates the columns of the mat-table
   * */
  displayedColumns: string[] &#x3D; [&#x27;id&#x27;, &#x27;name&#x27;, &#x27;tags&#x27;, &#x27;status&#x27;];

  responsiveColumns: string[] &#x3D; [&#x27;id&#x27;];

  /**
   * this variable instantiates the MatTableDataSource used for the inseri app menu
   * */
  dataSource: MatTableDataSource&lt;any&gt;;

  /**
   * paginator for the inseri app menu
   * */
  @ViewChild(MatPaginator) paginator: MatPaginator;

  /**
   * needed for the sorting for the inseri app menu
   * */
  @ViewChild(MatSort) sort: MatSort;

  /**
   * actionID - the actionID of the action that the page belongs to
   * */
  actionID: string;

  /**
   * page - information about the page, title, queryIDs, etc.
   * */
  page: any &#x3D; {};

  /**
   * action - information about the action, title, etc
   * */
  action: any;

  /**
   * panelsOpen - indicates if all panels in the sideNav are open or closed
   * */
  panelsOpen &#x3D; false;

  /**
   * pageIDFromURL - pageID, taken from the URL - param
   * */
  pageIDFromURL: string;

  /**
   * openAppsInThisPage - open apps formatted in a way that ng iterates through them in page.html
   * */
  openAppsInThisPage: any &#x3D; (new OpenAppsModel).openApps;

  /**
   * pageAsDemo - if no pageID is given in the url, a demo page is opened
   * */
  pageAsDemo &#x3D; false;

  /**
   * resetPage - gets rid of all open apps
   * */
  resetPage &#x3D; false;

  /**
   * reloadVariables - initialises a reload of all open apps for the current page
   * */
  reloadVariables &#x3D; false;

  /**
   * response - after choosing a data entry in the data chooser, the response of the respective query is send back as well
   * */
  response: any;

  /**
   * queryID - after choosing a data entry in the data chooser, the queryID of the respective query is send back as well
   * */
  queryId: string;

  /**
   * index - when a user klick on the array in the data chooser, the index that the user chose is send back to the page.component
   * */
  index: number;

  /**
   * depth - depth in json of the array that the user chose in the data - chooser
   * */
  depth: number;

  /**
   * cssUrl - variable needed for POC of page - specific css, contact domsteinbach on github for more information
   * */
  cssUrl: any;

  /**
   * appFramePosition - &quot;static&quot; if user chooses the option to sort apps by type, &quot;absolute&quot; otherwise
   * */
  appFramePosition &#x3D; &#x27;absolute&#x27;;

  /**
   * currentRoute: is used to get url params, for example to determin if page is part of a pageSet
   * */
  currentRoute: string;

  /**
   * Identifier of a resource on which the mouse pointer is on. This variable enables sharing the information between apps.
   */
  hoveredElement: string;

  /**
   * needed to generate the hierarchical-navigation-view in case that the page belongs to a pageSet
   * */
  pagesOfThisActtion: Array&lt;any&gt;;

  /**
   * same as pageID
   * */
  hashOfThisPage: string;

  /**
   *  - Needed to generate the hierarchical-navigation-view
   * */
  lastView: any;

  /**
   * Needed to generate the hierarchical-navigation-view
   * */
  nextView: any;
  /**
   * If an action is a pageSet, it contains an array with the pages, from this array the hierarchical-navigation-view is created,
   * the following value is needed to generate the hierarchical-navigation-view
   * */
  selectedPageIndex &#x3D; 0;

  /**
   * This variable makes sure that the load-variables.component is loaded only once
   * */
  alreadyLoaded &#x3D; false;

  /**
   * this variable indicates if page is shown in the preview - mode which indicates how the page would look published.
   * */
  preview &#x3D; false;

  /**
   * Used to display how much longer the user will be logged in
   * */
  userInfo: string;

  /**
   * used to reqest the expiration time of the currently logged in user
   * */
  sub: any;

  /**
   * Used to display notifications
   * */
  snackBarOpen &#x3D; false;

  /**
   * Indicates if the lighthouse button is highlighted or not
   * */
  lightHouse &#x3D; true;

  /**
   * Describes which elements should be shown on published page
   * */
  showAppTitlesOnPublish &#x3D; false;
  showInseriLogoOnPublish &#x3D; false;
  showAppSettingsOnPublish &#x3D; false;
  showDataBrowserOnPublish &#x3D; true;
  theme &#x3D; &#x27;none&#x27;;

  openAppArray &#x3D; [];

  /**
   * Described if publish option expansion panel is open
   * */
  publishedOptionsExpanded &#x3D; false;

  /**
   * indicates if page is published
   * */
  pageIsPublished &#x3D; false;

  /**
   * Describes if user is logged in
   * */
  loggedIn &#x3D; true;

  /**
   * Array of appType names
   * */
  appTypes: Array&lt;string&gt; &#x3D; [];

  environment &#x3D; environment;

  selectedPageToShow: number;

  pathWithArray: Array&lt;string&gt;;

  querySet &#x3D; new Set();

  innerWidth: number;

  alreadyGenerated &#x3D; false;

  showResponsiveWidthMenu &#x3D; false;

  nothAlreadyQueryAppPathGenerated &#x3D; new Set();


  appMenuModel &#x3D; new AppMenuModel().appMenu;

  params: any;

  notFound &#x3D; false;

  slogans &#x3D; [
    &#x27;Where you can gather information&#x27;,
    &#x27;It\&#x27;s pretty cloudy in the cloud&#x27;,
    &#x27;If you like it less cloudy in the cloud&#x27;,
    &#x27;Your web application environment&#x27;,
    &#x27;Save RESTFul-Queries and visualise responses&#x27;,
    &#x27;Your appshore in the cloud&#x27;
  ];


  slogan: string;

  shortNameExist: boolean;

  queryParams: any;
  private templatePhoto: File;
  private imagePreview: string;

  shortName: string;
  private selectedPage: any;

  selectedSubPage: SubPageOfPageModel;
  subPagesOfPage: SubPageOfPageModel[] &#x3D; [];
  // dataSourceOfSubPages: MatTableDataSource&lt;any&gt;;
  pageSet: any;
  private actionAlreadyLoaded: boolean;
  addSubPages: boolean;
  private totalParentPages: 0;
  currentParams: any;
  featuredProjects: Array&lt;any&gt;;

  /**
   * userName of the Minimize Password Dialog
   */
  userName: string;
  /**
   * password of the Minimize Password Dialog
   */
  password: string;
  /**
   * parameter to the Minimize Password Dialog
   * indicates if this is the first time the user adds his credentials or his credentials is already saved before
   * This parameter should be extracted from the db along side the minimize app
   */
  // firstTime: boolean;
  /**
   * A parameter that indicates if the user added the correct credentails during opening the minimized app or not
   */
  private correctCredentials: boolean;

  constructor(
    public route: ActivatedRoute,
    private cdr: ChangeDetectorRef,
    private generateHashService: GenerateHashService,
    private openApps: OpenAppsModel,
    private resetOpenApps: OpenAppsModel,
    private pageService: PageService,
    public dialog: MatDialog,
    public queryInfoDialog: MatDialog,
    private requestService: GeneralRequestService,
    public sanitizer: DomSanitizer,
    private stylemapping: StyleMappingService,
    private actionService: ActionService,
    public router: Router,
    public snackBar: MatSnackBar,
    public snackBar2: MatSnackBar,
    private authService: AuthService,
    private queryService: QueryService,
    private overlayContainer: OverlayContainer,
    private pageSetService: PageSetService,
    private http: HttpClient,
    public minimizePasswordDialog: MatDialog,
  ) {
    this.route.queryParams.subscribe(params &#x3D;&gt; {
      this.hashOfThisPage &#x3D; params.page;
      this.actionID &#x3D; params.actionID;
     // this.alreadyLoaded &#x3D; params.alreadyLoaded;
      // console.log(params.actionAlreadyLoaded);
      // if (!params.actionAlreadyLoaded) {
        this.generateNavigation(params.actionID);
     // }

    });
    // route
    if ( this.route.snapshot.queryParams.page ) {
      this.dataSource &#x3D; new MatTableDataSource(
        new AppMenuModel().appMenu
      );
    } else {
      const menuForHome &#x3D; [];
      for ( const app of new AppMenuModel().appMenu ) {
        if ( app.showOnHome ) {
          menuForHome.push(app);
        }
      }
      this.dataSource &#x3D; new MatTableDataSource(
        menuForHome
      );
    }

  }

  /**
   * Opens the data managment dialog where users can add queries to the page
   * */
  openDataManagement() {
    // console.log( this.quer )
    const dialogRef &#x3D; this.dialog.open(DataManagementComponent, {
      width: &#x27;80%&#x27;,
      height: &#x27;80%&#x27;,
      data: [ this.openAppsInThisPage, this.page, this.openAppArray, this.querySet ]
    });
    dialogRef.afterClosed().subscribe((result) &#x3D;&gt; {
      this.resetPage &#x3D; true;
      this.reloadVariables &#x3D; true;
    });
  }

  fillPagesOfThisActionArray(subPagesOfPage: SubPageOfPageModel[]) {// , selectedPageIndex?: number[], continueSearching?: boolean) {
    for (let i &#x3D; 0; i &lt; subPagesOfPage.length; i++) {
      this.pagesOfThisActtion.push(subPagesOfPage[i].page);
      if (subPagesOfPage[i].page._id &#x3D;&#x3D;&#x3D; this.hashOfThisPage) {
        this.selectedPageIndex &#x3D; this.pagesOfThisActtion.length - 1;
        console.log(this.selectedPageIndex);
      }
    }
    for (let i &#x3D; 0; i &lt; subPagesOfPage.length; i++) {
      if (subPagesOfPage[i].subPages.length !&#x3D;&#x3D; 0) {
        this.fillPagesOfThisActionArray(subPagesOfPage[i].subPages); // , selectedPageIndex, continueSearching);
      }
    }
    this.alreadyLoaded &#x3D; true;
  }



  /**
   * if the pageID changes in URL, the page is updated through setting reloadViariables to true,
   * this change is detected by the load - variables.component which loads all variables and
   * emits it back to the page.component
   * */
  ngAfterViewChecked() {
    this.cdr.detectChanges();
    if ( this.pageIDFromURL !&#x3D;&#x3D;  this.route.snapshot.queryParams.page ) {
      setTimeout(() &#x3D;&gt; {
        this.reloadVariables &#x3D; true;
        this.openAppArray &#x3D; [];
        this.page &#x3D; {};
        this.pageIDFromURL &#x3D; this.route.snapshot.queryParams.page;
      }, 500);
      this.cdr.detectChanges();
    }
    if ( this.route.snapshot.queryParams !&#x3D;&#x3D; this.currentParams ) {
      this.currentParams &#x3D; this.route.snapshot.queryParams;
      if ( this.page.queries ) {
        for ( const queryId of this.page.queries ) {
          this.queryService.getQuery(queryId)
            .subscribe((data) &#x3D;&gt; {
              // console.log( data );
              for ( const param in this.currentParams ) {
                // console.log( param );
                if (
                  ( data.query.body !&#x3D;&#x3D; null &amp;&amp;
                    data.query.body.search( &#x27;inseriParam---&#x27; + param + &#x27;---&#x27; ) !&#x3D;&#x3D; -1 ) ||
                  ( data.query.serverUrl !&#x3D;&#x3D; null &amp;&amp;
                    data.query.serverUrl.search( &#x27;inseriParam---&#x27; + param + &#x27;---&#x27; ) !&#x3D;&#x3D; -1 )
                ) {
                  console.log( &#x27;reload!&#x27; );
                  this.reloadVariables &#x3D; true;
                }
              }
            });
        }
      }
    }
  }

  applyFilter(filterValue: string) {
    this.dataSource.filter &#x3D; filterValue.trim().toLowerCase();
    console.log( this.dataSource.filter );

    if (this.dataSource.paginator) {
      this.dataSource.paginator.firstPage();
    }
  }

  ngOnInit() {

    if ( this.router.url.split(&#x27;/&#x27;)[ 1 ].search( &#x27;actionID&#x3D;&#x27; ) &#x3D;&#x3D;&#x3D; -1 ) {
      this.actionService.checkIfShortNameExist( this.router.url.split(&#x27;/&#x27;)[ 1 ] )
        .subscribe(
          response &#x3D;&gt; {
            console.log( response );
            if ( (response as any).exist ) {
              this.pageSetService.getPageSet( ( response as any).action.hasPageSet )
                .subscribe(
                  pageSetResponse &#x3D;&gt; {
                    console.log( pageSetResponse );
                    this.router.navigate([&#x27;/page-set&#x27;],
                      {
                        queryParams: {
                          &#x27;actionID&#x27;: ( response as any).action._id
                        }, queryParamsHandling: &#x27;merge&#x27;
                      });
                  }, e2 &#x3D;&gt; console.log( e2 )
                );
            } else if ( this.router.url.split(&#x27;/&#x27;)[ 1 ].search( &#x27;home&#x27; ) &#x3D;&#x3D;&#x3D; -1 ) {
              this.notFound &#x3D; true;
            }
          }, e &#x3D;&gt; console.log( e )
        );
    }

    this.slogan &#x3D; this.slogans[Math.floor(Math.random() * this.slogans.length)];

    this.innerWidth &#x3D; window.innerWidth;

    /**
     * Checks how much longer user is logged on
     * */
    this.sub &#x3D; Observable.interval(1000)
      .subscribe((val) &#x3D;&gt; {
        this.checkTimeUntilLogout();
      });

    /**
     * If not logged in, preview instatiates the published page options.
     * */
    if ( !this.authService.getIsAuth() ) {
      this.preview &#x3D; true;
      this.loggedIn &#x3D; false;
      this.page.tiles &#x3D; true;
    }

    /**
     * Necesary for appshore menu
     * */
    for ( const appType in this.openApps.openApps ) {
      this.appTypes.push( appType );
    }
    this.dataSource.paginator &#x3D; this.paginator;
    this.dataSource.sort &#x3D; this.sort;

    this.overlayContainer.getContainerElement().classList.add(this.theme); // overlay so dropdown of themes is not affected by styles


    /**
     * Creates home page
     * */
    if (
      this.route.snapshot.url[0].path &#x3D;&#x3D;&#x3D; &#x27;home&#x27; &amp;&amp;
      this.route.snapshot.queryParams.actionID &#x3D;&#x3D;&#x3D; undefined
    ) {
      this.page.tiles &#x3D; true;
      this.preview &#x3D; false;
      this.http.get( &#x27;assets/featuredProjects.json&#x27; )
        .subscribe(
          data &#x3D;&gt; {
            this.featuredProjects &#x3D; (data as any).featuredProjects;
            console.log( this.featuredProjects );
            for ( const project of this.featuredProjects ) {
              this.addAnotherApp( &#x27;matCard&#x27;, true, project.myTitle );
              this.openAppArray[ 0 ].backgroundImage &#x3D; project.backgroundImage;
              this.openAppArray[ 0 ].myTitle &#x3D; project.myTitle;
              this.openAppArray[ 0 ].subtitle &#x3D; project.subtitle;
              this.openAppArray[ 0 ].image &#x3D; project.image;
              this.openAppArray[ 0 ].myDescription &#x3D; project.myDescription;
              this.openAppArray[ 0 ].mylink &#x3D; project.mylink;
              this.openAppArray[ 0 ].buttonDescription &#x3D; project.buttonDescription;

            }
            this.addAnotherApp( &#x27;login&#x27;, true, &#x27;login&#x27; );
            this.addAnotherApp( &#x27;iframe&#x27;, true, &#x27;Hans Cools&#x27; );
            console.log( this.openAppArray );
            this.openAppArray[ 0 ][ &#x27;url&#x27; ] &#x3D; &#x27;https://e-editiones.ch/&#x27;;
            this.openAppArray[ 0 ][ &#x27;fullHeight&#x27; ] &#x3D; true;
            this.openAppArray[ 0 ][ &#x27;width&#x27; ] &#x3D; &#x27;1000&#x27;;
          }, error &#x3D;&gt; {
            this.addAnotherApp( &#x27;login&#x27;, true, &#x27;login&#x27; );
          }
        );
    }

    this.actionID &#x3D; this.route.snapshot.queryParams.actionID;
    this.pageIDFromURL &#x3D; this.route.snapshot.queryParams.page;

    /**
     * If there is no action Id in the url, variables are set to instantiate the landing page
     * */
    if ( !this.actionID ) {
      this.pageAsDemo &#x3D; true;
      this.lightHouse &#x3D; false;
    }

    /**
     * The key value pair curZindex is reset, it is incremented by one every time the user clicks on the app frame title bar
     * so that the clicked app comes to the front
     * */
    localStorage.removeItem(&#x27;curZIndex&#x27;);

    /**
     * If the page is a demo, the lighthouse changes the colour every 7 secdons
     * */
    if ( this.pageAsDemo ) {
      this.startLightHouse();
    }

  }

  /**
   * If the page is a demo, the lighthouse changes the colour every 7 secdons
   * */
  startLightHouse() {
    setTimeout(() &#x3D;&gt; {
      this.lightHouse &#x3D; !this.lightHouse;
      this.startLightHouse();
    }, 7000);
  }

  /**
   * Youtube utorial videos are added with this function
   * */
  addVideoApp( url: string ) {
    this.addAnotherApp( &#x27;youtubeVideo&#x27;, true, &#x27;Youtube Video&#x27; );
    const length &#x3D; this.openAppsInThisPage[ &#x27;youtubeVideo&#x27; ].model.length - 1;
    this.openAppsInThisPage[ &#x27;youtubeVideo&#x27; ].model[ length ].initialized &#x3D; true;
    this.openAppsInThisPage[ &#x27;youtubeVideo&#x27; ].model[ length ].x &#x3D; 100;
    this.openAppsInThisPage[ &#x27;youtubeVideo&#x27; ].model[ length ].y &#x3D; 100;
    this.openAppsInThisPage[ &#x27;youtubeVideo&#x27; ].model[ length ][&#x27;videoURL&#x27;] &#x3D; url;
    this.openAppsInThisPage[ &#x27;youtubeVideo&#x27; ].model[ length ].width &#x3D; 600;
    this.openAppsInThisPage[ &#x27;youtubeVideo&#x27; ].model[ length ].height &#x3D; 400;
  }

  goToPageSet() {
    this.router.navigate([&#x27;/page-set&#x27;],
      { queryParams:
          {
            actionID: this.actionID
          }
      });
  }

  goToDashBoard() {
    this.router.navigate([&#x27;/dashboard&#x27;]);
  }

  addNewPage(page) {
    // alert(&#x27;add New Page&#x27;);
    const dialogRef &#x3D; this.dialog.open(DialogCreateNewPageComponent, {
      width: &#x27;700px&#x27;,
      data: { pageset: this.action.hasPageSet,
              parentPageId: null
              // subPage: ,
              // pageId:
             }
    });
    dialogRef.afterClosed().subscribe(result &#x3D;&gt; {
      this.alreadyLoaded &#x3D; false;
      this.subPagesOfPage.push({page: result.page, subPages: []});
      // this.updatePagesArray(result);
      this.navigateToOtherView(result.page);
      // this.generateNavigation(this.actionID, true);
    });
  }

  /**
   * This function is used to navigate to another page belonging to the current pageSet
   * */
  selectPage(i: number, page: any, ) {
    console.log(page);
    console.log(i);
    console.log(this.selectedPageIndex);
    this.selectedPageIndex &#x3D; i;
    this.selectedPageToShow &#x3D; i + 1;
    this.selectedPage &#x3D; page;
    this.navigateToOtherView(page);
  }

  /**
   * This function is used to navigate to another page belonging to the current pageSet
   * */
  navigateToOtherView(page: any) {
    console.log( page );
    this.router.navigate( [ &#x27;page&#x27; ], {
      queryParams: {
        &#x27;actionID&#x27;: this.actionID,
        &#x27;page&#x27;: page._id,
       // &#x27;actionAlreadyLoaded&#x27;: true
      }, queryParamsHandling: &#x27;merge&#x27;
    } );
  }

  /**
   * This function generates the pagesOfThisActtion Array
   * */
  generateNavigation(actionID: string) {
    if (!this.alreadyLoaded &amp;&amp; actionID) {
      this.subPagesOfPage &#x3D; [];
      this.actionService.getAction(actionID)
        .subscribe(data &#x3D;&gt; {
          this.pageSet &#x3D; data.body.action.hasPageSet._id;
          // console.log(data.body.action.hasPageSet.hasPages);
          // console.log(data.body.hierarchyOfPages);
            if (data.body.action.type &#x3D;&#x3D;&#x3D; &#x27;page-set&#x27;) {
              this.pagesOfThisActtion &#x3D; [];
              this.subPagesOfPage &#x3D; data.body.hierarchyOfPages;
              // this.dataSourceOfSubPages &#x3D; new MatTableDataSource(this.subPagesOfPage);
              // console.log(this.subPagesOfPage);
              // for (const page of ( data.body as any ).action.hasPageSet.hasPages as any ) {
              //   if ( page._id &#x3D;&#x3D;&#x3D; this.hashOfThisPage ) {
              //     this.selectedPageIndex &#x3D; this.pagesOfThisActtion.length;
              //   }
              //   // this.subPagesOfPage.push({page: page, subPages: null});
              //   // this.selectSubPages(page);
              //   this.pagesOfThisActtion[this.pagesOfThisActtion.length] &#x3D; page;
              //   this.alreadyLoaded &#x3D; true;
              // }
              // let pageIndex: number [];
              // console.log(this.subPagesOfPage);
               this.fillPagesOfThisActionArray(this.subPagesOfPage); // , pageIndex, true);
               this.totalParentPages &#x3D; ( data.body as any ).action.hasPageSet.hasPages.length;
              // console.log(&#x27;pagesOfThisActtion&#x27;);
              // console.log(this.pagesOfThisActtion);
              // console.log(&#x27;selectedIndex&#x27;);
              // console.log(this.selectedPageIndex);
                this.router.navigate( [ &#x27;page&#x27; ], {
                  queryParams: {
                    &#x27;actionID&#x27;: this.actionID,
                    &#x27;page&#x27;: this.pagesOfThisActtion[ this.selectedPageIndex ]._id, // this.hashOfThisPage
                   // &#x27;actionAlreadyLoaded&#x27;: true
                  }, queryParamsHandling: &#x27;merge&#x27;
                } );
              // }
            }
          },
          error &#x3D;&gt; {
            // console.log(error);
          });
    }
  }

  /**
   * This routine updates the coordinates and all other metadata of a moved app in the variable
   * page.openApps[ app.hash ]. This is necessary for the updatePage() routine which saves the page
   * including all open apps.
   * */
  updateAppCoordinates(app: any) {
    if (this.page.openApps[ app.hash ] &#x3D;&#x3D;&#x3D; null) {
      this.page.openApps[ app.hash ] &#x3D; [];
    }
    this.page.openApps[ app.hash ] &#x3D; app;
  }

  /**
   * This function updates the page in MongoDB
   * */
  updatePage( reload?: boolean ) {
    /**
     *  - it is important to give a COPY of this.page as an input, thus { ...this.page },
     * otherwise this.page will be rewritten by the routine pageService.updatePage
     * during its execution!
     * */
    let openAppArrayIndex &#x3D; 0;
    for ( let i &#x3D; 0; i &lt; this.openAppArray.length; i++ ) {
      if (
        this.page.openApps[ this.openAppArray[ i ].hash ].type !&#x3D;&#x3D; &#x27;pageMenu&#x27; &amp;&amp;
        this.page.openApps[ this.openAppArray[ i ].hash ].type !&#x3D;&#x3D; &#x27;dataChooser&#x27;
      ) {
        this.page.openApps[ this.openAppArray[ i ].hash ].openAppArrayIndex &#x3D; openAppArrayIndex;
        openAppArrayIndex +&#x3D; 1;
      }
    }
    for ( const mapping in this.page.appInputQueryMapping ) {
      if ( !this.page.openApps[ mapping ] ) {
        delete this.page.appInputQueryMapping[ mapping ];
      }
    }
    // console.log( this.page );
    this.pageService.updatePage(
      { ...this.page }
    )
      .subscribe(
        data &#x3D;&gt; {
          this.snackBarOpen &#x3D; true;
          setTimeout(() &#x3D;&gt; {
            this.snackBarOpen &#x3D; false;
          }, 2000);
          // this.snackBar2.open( &#x27;Page successfully saved&#x27;, &#x27;ok&#x27;,
          //   {
          //     duration: 2000
          //   });
          if ( reload ) {
            this.reloadVariables &#x3D; true;
          }
        },
        error &#x3D;&gt; {
          console.log(error);
          this.snackBar2.open( &#x27;Sth went wrong, page has not been saved&#x27; );
        });
  }

  /**
   * This function adds another app to the page. It is invocated through the
   * inseri appshore menu
   * */
  addAnotherApp (
    appType: string,
    generateHash: boolean,
    title: string,
    fileUrlPath?: string,
    chosenInput?: string
  ): Array&lt;any&gt; {
    for ( let i &#x3D; 0; i &lt; this.openAppArray.length; i++ ) {
      if ( this.openAppArray[ i ].type &#x3D;&#x3D;&#x3D; &#x27;pageMenu&#x27; ) {
        this.openAppArray.splice( i, 1 );
      }
    }
    this.dataSource.filter &#x3D; undefined;
    const appModel &#x3D; this.openAppsInThisPage[ appType ].model;
    console.log( appModel );
    const length &#x3D; appModel.length;
    appModel[ length ] &#x3D; {};
    if ( generateHash ) {
      appModel[ length ].hash &#x3D; this.generateHashService.generateHash();
      appModel[ length ].type &#x3D; appType;
      appModel[ length ].title &#x3D; appType;
      appModel[ length ].fullWidth &#x3D; this.openAppsInThisPage[ appType ].fullWidth;
      appModel[ length ].fullHeight &#x3D; this.openAppsInThisPage[ appType ].fullHeight;
      appModel[ length ].initialized &#x3D; true;
      appModel[ length ].x &#x3D; 100;
      appModel[ length ].y &#x3D; 100;
      appModel[ length ].initialHeight &#x3D; this.openAppsInThisPage[ appType ].initialHeight;
      appModel[ length ].initialWidth &#x3D; this.openAppsInThisPage[ appType ].initialWidth;
      appModel[ length ].width &#x3D; this.openAppsInThisPage[ appType ].initialWidth;
      appModel[ length ].height &#x3D; this.openAppsInThisPage[ appType ].initialHeight;
      appModel[ length ].openAppArrayIndex &#x3D; length;
      appModel[ length ].showContent &#x3D; true;
      appModel[ length ].materialIcon &#x3D; this.openAppsInThisPage[ appType ].materialIcon;
      if ( !this.page.openApps ) {
        this.page.openApps &#x3D; {};
      }

      if (
        this.page.openApps &amp;&amp;
        this.page.openApps[ appModel[ length ].hash ] &#x3D;&#x3D;&#x3D; null
      ) {
        this.page.openApps[ appModel[ length ].hash ] &#x3D; [];
      }
      if ( this.page.openApps ) {
        this.page.openApps[ appModel[ length ].hash ] &#x3D; appModel[ length ];
      }
      if ( this.openAppArray.length &#x3D;&#x3D;&#x3D; 0 ) {
        this.openAppArray.push( appModel[ length ] );
      } else {
        this.openAppArray &#x3D; [ appModel[ length ] ].concat( this.openAppArray );
      }
      console.log( &#x27;here&#x27;, appType, this.openAppsInThisPage[ appModel[ length ].type ].inputs );
      if ( appType !&#x3D;&#x3D; &#x27;pageMenu&#x27; &amp;&amp;  this.openAppsInThisPage[ appModel[ length ].type ].inputs &amp;&amp; this.loggedIn ) {
        console.log( &#x27;create inputs&#x27; );
        for ( const input of this.openAppsInThisPage[ appModel[ length ].type ].inputs ) {
          this.createDefaultInputAndMappToAppInput(
            appType,
            appModel[ length ],
            input,
            chosenInput &#x3D;&#x3D;&#x3D; input.inputName ? fileUrlPath : input.default
          );
        }
      } else if ( this.loggedIn ) {
        this.updatePage();
      }
    }
    return appModel;
  }

  createDefaultInputAndMappToAppInput(
    appType: string,
    app: any,
    input: any,
    valueToAssign: string
  ) {
    if ( this.loggedIn ) {
      app.spinnerIsShowing &#x3D; true;
    }
    // for ( const input of this.openAppsInThisPage[ app.type ].inputs ) {
    const now &#x3D; new Date();
    console.log(!this.page.serverUrl);
    if ( !this.page.jsonId ) {
      this.queryService.createQueryOfPage(this.page._id,
        {title: &#x27;page:&#x27; + this.page.title + &#x27; | data stored in inseri&#x27;})
        .subscribe(data &#x3D;&gt; {
          if (data.status &#x3D;&#x3D;&#x3D; 201) {
            const query &#x3D; data.body.query;
            this.page.queries.push( query._id );
            this.requestService.createJson()
              .subscribe(myOwnJson &#x3D;&gt; {
                  const jsonId &#x3D; (myOwnJson as any).result._id;
                  const serverURL &#x3D; environment.node + &#x27;/api/myOwnJson/getJson/&#x27; + String((myOwnJson as any).result._id);
                  this.page.jsonId &#x3D; jsonId;
                  this.page.ownQuery &#x3D; query._id;
                  query.serverUrl &#x3D; serverURL;
                  query.method &#x3D; &#x27;JSON&#x27;;
                  query.description &#x3D; now.getFullYear() +
                    &#x27;:&#x27; + now.getDate() +
                    &#x27;:&#x27; + now.getHours() +
                    &#x27;:&#x27; + now.getMinutes() +
                    &#x27;:&#x27; + now.getSeconds();
                  this.queryService.updateQueryOfPage(this.page._id, query._id, query)
                    .subscribe((data3) &#x3D;&gt; {
                      if (data3.status &#x3D;&#x3D;&#x3D; 200) {
                      } else {
                        console.log(&#x27;Updating query failed&#x27;);
                      }
                    }, error1 &#x3D;&gt; console.log(error1));
                  if ( this.page.appInputQueryMapping[ app.hash ] &#x3D;&#x3D;&#x3D; undefined ) {
                    this.page.appInputQueryMapping[ app.hash ] &#x3D; {};
                  }
                  this.page.appInputQueryMapping[ app.hash ][ input.inputName ] &#x3D; {};
                  this.page.appInputQueryMapping[ app.hash ][ input.inputName ][ &#x27;path&#x27; ] &#x3D;
                    [ &#x27;result&#x27;, &#x27;content&#x27;, &#x27;info&#x27;, app.hash, input.inputName ];
                  this.page.appInputQueryMapping[ app.hash ][ input.inputName ].query &#x3D; this.page.ownQuery;
                  this.page.appInputQueryMapping[ app.hash ][ input.inputName ][ &#x27;serverUrl&#x27; ] &#x3D;
                    environment.node + &#x27;/api/myOwnJson/getJson/&#x27; + this.page.jsonId;
                  this.page.appInputQueryMapping[ app.hash ].app &#x3D; app.hash;
                  this.requestService.updateJson(
                    this.page.jsonId,
                    {
                      _id: this.page.jsonId,
                      creator: this.page.creator,
                      content: {
                        info: {
                          [app.hash]: {
                            [input.inputName]: valueToAssign
                          }
                        }
                      },
                      __v: 0
                    }
                  )
                    .subscribe(updatedJson &#x3D;&gt; {
                        this.updatePage();
                        setTimeout(() &#x3D;&gt; {
                          // console.log( &#x27;reload 702&#x27; );
                          this.reloadVariables &#x3D; true;
                        }, 200);
                      }, error &#x3D;&gt; console.log(error)
                    );
                }, error &#x3D;&gt; {
                  console.log(error);
                }
              );
          }
        }, error1 &#x3D;&gt; {
          app.spinnerIsShowing &#x3D; false;
          // console.log( error1 );
        });
    } else {
      // console.log( &#x27;update existing query&#x27;, input );
      let existingInputs: any;
      this.requestService.get(  environment.node + &#x27;/api/myOwnJson/getJson/&#x27; + this.page.jsonId, undefined, undefined )
        .subscribe(
          myOwnJsonResponse &#x3D;&gt; {
            // console.log( myOwnJsonResponse );
            if ( myOwnJsonResponse.body.result.content ) {
              existingInputs &#x3D; myOwnJsonResponse.body.result.content.info;
            } else {
              existingInputs &#x3D; {};
            }
            // console.log( existingInputs );
            if ( existingInputs[app.hash] &#x3D;&#x3D;&#x3D; undefined ) {
              existingInputs[app.hash] &#x3D; {};
            }
            existingInputs[app.hash][input.inputName] &#x3D; valueToAssign;
            this.requestService.updateJson(
              this.page.jsonId,
              {
                _id: this.page.jsonId,
                creator: this.page.creator,
                content: {
                  info: existingInputs
                },
                __v: 0
              }
            )
              .subscribe(updatedJson &#x3D;&gt; {
                  // console.log(updatedJson);
                  if ( this.page.appInputQueryMapping[ app.hash ] &#x3D;&#x3D;&#x3D; undefined ) {
                    this.page.appInputQueryMapping[ app.hash ] &#x3D; {};
                  }
                  this.page.appInputQueryMapping[ app.hash ][ input.inputName ] &#x3D; {};
                  this.page.appInputQueryMapping[ app.hash ][ input.inputName ][ &#x27;path&#x27; ] &#x3D;
                    [ &#x27;result&#x27;, &#x27;content&#x27;, &#x27;info&#x27;, app.hash, input.inputName ];
                  this.page.appInputQueryMapping[ app.hash ][ input.inputName ].query &#x3D; this.page.ownQuery;
                  this.page.appInputQueryMapping[ app.hash ][ input.inputName ][ &#x27;serverUrl&#x27; ] &#x3D;
                    environment.node + &#x27;/api/myOwnJson/getJson/&#x27; + this.page.jsonId;
                  this.page.appInputQueryMapping[ app.hash ].app &#x3D; app.hash;
                  this.updatePage();
                  setTimeout(() &#x3D;&gt; {
                    console.log( &#x27;reload 753&#x27; );
                    this.reloadVariables &#x3D; true;
                  }, 200);
                }, error &#x3D;&gt; console.log(error)
              );
          }, error &#x3D;&gt; console.log( error )
        );
    }
    // }
  }

  /**
   * This function is used to remove an app from the page
   * */
  closeApp(
    appHash: string,
    i: number
  ) {
    console.log( this.page );
    this.openAppArray.splice(
      i,
      1);
    if ( this.page.openApps ) {
      delete this.page.openApps[ appHash ];
    }
  }

  /**
   * When a user updates settings in the app setting dialog instantiated in
   * frame.component.ts, this component emits the settings back so that
   * it can be stored as part of the page that contains the app
   * */
  updateAppSettings( settings: any ) {
    for ( const app of this.openAppsInThisPage[ settings.type ].model ) {
      if ( settings.hash &#x3D;&#x3D;&#x3D; app.hash ) {
        app.title &#x3D; settings.title;
        app.width &#x3D; settings.width;
        app.height &#x3D; settings.height;
        app.fullWidth &#x3D; settings.fullWidth;
        app.fullHeight &#x3D; settings.fullHeight;
        app.description &#x3D; settings.description;
      }
    }
    for ( const app of this.openAppArray ) {
      if ( settings.hash &#x3D;&#x3D;&#x3D; app.hash ) {
        app.title &#x3D; settings.title;
        app.width &#x3D; settings.width;
        app.height &#x3D; settings.height;
        app.fullWidth &#x3D; settings.fullWidth;
        app.fullHeight &#x3D; settings.fullHeight;
        app.description &#x3D; settings.description;
      }
    }
    this.page.openApps[ settings.hash ].title &#x3D; settings.title;
    this.page.openApps[ settings.hash ].width &#x3D; settings.width;
    this.page.openApps[ settings.hash ].height &#x3D; settings.height;
    this.page.openApps[ settings.hash ].fullWidth &#x3D; settings.fullWidth;
    this.page.openApps[ settings.hash ].fullHeight &#x3D; settings.fullHeight;
    this.page.openApps[ settings.hash ].description &#x3D; settings.description;
    this.updatePage();
  }

  /**
   * The load-variables.component emits the page and the action loaded from mongodb to this
   * function where the relevant variables are updated
   * */
  receivePage( pageAndAction: any ) {
    this.page &#x3D; pageAndAction[0];
    this.page.tiles &#x3D; true;
    // console.log( this.page );
    this.action &#x3D; pageAndAction[1];
    // console.log( this.action );
    this.reloadVariables &#x3D; false;
    this.pageIsPublished &#x3D; this.page.published;
    this.showAppTitlesOnPublish &#x3D; this.page.showAppTitlesOnPublish;
    this.showAppSettingsOnPublish &#x3D; this.page.showAppSettingsOnPublish;
    this.showInseriLogoOnPublish &#x3D; this.page.showInseriLogoOnPublish;
    this.showDataBrowserOnPublish &#x3D; this.page.showDataBrowserOnPublish;
  }

  generateOpenApps( openApps: any ) {
    // console.log( openApps );
    this.openAppArray &#x3D; [];
    for ( const appType in openApps ) {
      for ( const app of openApps[ appType ].model ) {
        // console.log( app );
        if ( app.x ) {
          console.log( app );
          this.openAppArray.push( app );
        }
      }
    }
    // console.log( this.openAppArray );
    for ( const app of this.openAppArray ) {
      app.openAppArrayIndex &#x3D; this.page.openApps[ app.hash ].openAppArrayIndex;
    }
    const helpArray &#x3D; [];
    for ( const app of this.openAppArray ) {
      helpArray[ app.openAppArrayIndex ] &#x3D; app;
    }
    if ( helpArray.length &#x3D;&#x3D;&#x3D;  this.openAppArray.length ) {
      this.openAppArray &#x3D; helpArray;
    }
  }

  /**
   * The load-variables.component emits the openApps - information loaded from mongodb to this
   * function where the relevant variables are updated
   * */
  receiveOpenAppsInThisPage( openAppsInThisPage: any ) {
    this.openAppsInThisPage &#x3D; openAppsInThisPage;
    this.reloadVariables &#x3D; false;
    this.generateOpenApps( openAppsInThisPage );
  }

  /**
   * This fuction is invoked by an emit of the data-chooser component,
   * after the user chooses a data entry and triggers the data assignment component
   * */
  updateMainResourceIndex( input: any ) {
    // console.log( input );
    this.index &#x3D; input.index;
    this.response &#x3D; input.response;
    this.queryId &#x3D; input.queryId;
    this.cdr.detectChanges();
    this.depth &#x3D; input.depth;
    this.cdr.detectChanges();
    this.pathWithArray &#x3D; input.pathWithArray;
    this.cdr.detectChanges();
    const dataAssignmentComponent &#x3D; new DataAssignmentComponent();
    // console.log( this.index, input );
    if ( ( this.index as any ) &#x3D;&#x3D;&#x3D; &#x27;NaN&#x27; || this.index &#x3D;&#x3D;&#x3D; NaN ) {
      console.log( &#x27;index is NaN&#x27; );
      this.index &#x3D; 0;
    }
    if ( this.page &amp;&amp; this.openAppsInThisPage &amp;&amp; this.index &#x3D;&#x3D;&#x3D; 0 ) {
      // console.log( input );
      dataAssignmentComponent.startPathUpdateProcess(
        input.queryId,
        input.pathWithArray,
        input.index,
        input.response,
        input.depth,
        this.page.appInputQueryMapping,
        this.openAppsInThisPage
      );
    } else {
      setTimeout(() &#x3D;&gt; {
        // console.log( this.page, this.openAppsInThisPage, this.index, &#x27;page was loaded to late&#x27; );
        dataAssignmentComponent.startPathUpdateProcess(
          input.queryId,
          input.pathWithArray,
          input.index,
          input.response,
          input.depth,
          this.page.appInputQueryMapping,
          this.openAppsInThisPage
        );
      }, 1000);
    }
    if (  this.pathWithArray ) {
      for ( const app of this.openAppArray ) {
        for ( const appInput in this.page.appInputQueryMapping[ app.hash ] ) {
          if ( this.page.appInputQueryMapping[ app.hash ][ appInput ].query &#x3D;&#x3D;&#x3D; this.queryId ) {
            let allSegmentsTheSame &#x3D; true;
            for ( let i &#x3D; 0; i &lt;&#x3D; this.pathWithArray.length; i++ ) {
              if ( this.pathWithArray[ i ] !&#x3D;&#x3D; this.page.appInputQueryMapping[ app.hash ][ appInput ].path[ i ] ) {
                allSegmentsTheSame &#x3D; false;
              }
              if (
                ( i &#x3D;&#x3D;&#x3D; this.pathWithArray.length - 1 &amp;&amp; allSegmentsTheSame ) ||
                ( this.pathWithArray.length &#x3D;&#x3D;&#x3D; 0 &amp;&amp; this.response.length &gt; 0 )
              ) {
                if ( !app[ &#x27;pathsWithArrays&#x27; ] ) {
                  app[ &#x27;pathsWithArrays&#x27; ] &#x3D; {};
                }
                if ( !app[ &#x27;pathsWithArrays&#x27; ][ this.queryId ] ) {
                  app[ &#x27;pathsWithArrays&#x27; ][ this.queryId ] &#x3D; {};
                }
                if ( !app[ &#x27;pathsWithArrays&#x27; ][ this.queryId ][ this.pathWithArray.toString() ] ) {
                  app[ &#x27;pathsWithArrays&#x27; ][ this.queryId ][ this.pathWithArray.toString() ] &#x3D; {};
                }
                // console.log( input );
                dataAssignmentComponent.startPathUpdateProcess(
                  this.queryId,
                  this.pathWithArray,
                  this.index
                );
                app[ &#x27;pathsWithArrays&#x27; ][ this.queryId ][ this.pathWithArray.toString() ] &#x3D; {
                  index: input.index,
                  dataChooserEntries: input.dataChooserEntries,
                  response: this.response,
                  pathToValueInJson: this.page.appInputQueryMapping[ app.hash ][ appInput ].path
                };
              }
            }
          }
        }
      }
    }
  }

  /**
   * In the data chooser, a user can click on the name of the query.
   * This function generates the Query information needed to
   * generate the information in the the generated dialog.
   * */
  generateQueryAppPathInformation( queryId: string ): any {
    // console.log( this.openAppArray );
    let queryAppPathInformation;
    for ( const appHash in this.page.appInputQueryMapping ) {
      for ( const appType in this.openAppsInThisPage ) {
        if (
          this.openAppsInThisPage[ appType ].model.length &gt; 0 &amp;&amp;
          appType !&#x3D;&#x3D; &#x27;dataChooser&#x27;
        ) {
          for ( const appEntry of this.openAppsInThisPage[ appType ].model ) {
            if ( appEntry.hash &#x3D;&#x3D;&#x3D; appHash ) {
              for ( const input in this.page.appInputQueryMapping[ appHash ] ) {
                if ( this.page.appInputQueryMapping[ appHash ][ input ].query &#x3D;&#x3D;&#x3D; queryId ) {
                  if ( queryAppPathInformation &#x3D;&#x3D;&#x3D; undefined ) {
                    queryAppPathInformation &#x3D; [];
                  }
                  queryAppPathInformation.push(
                    {
                      appHash: appHash,
                      appTitle: appEntry.title,
                      path: this.page.appInputQueryMapping[ appHash ][ input ].path,
                      input: input,
                      type: appType
                    }
                  );
                }
              }
            }
          }
        }
      }
    }
    if ( queryAppPathInformation &#x3D;&#x3D;&#x3D; undefined ) {
      return undefined;
    } else {
      return queryAppPathInformation;
    }
  }

  /**
   * This function opens the QueryInformationDialog
   * */
  openQueryInformationDialog( queryId: string ) {
    const dialogRef &#x3D; this.queryInfoDialog.open(QueryInformationDialogComponent, {
      width: &#x27;800px&#x27;,
      height: &#x27;400px&#x27;,
      data: this.generateQueryAppPathInformation( queryId )
    });
  }

  updateTiledPosition( moveAndHash: any ) {
    console.log( moveAndHash );
  }

  openPageMenu() {
    this.addAnotherApp( &#x27;pageMenu&#x27;, true, &#x27;inseri Appshore&#x27; );
  }

  checkTimeUntilLogout() {
    const now &#x3D; new Date();
    const expirationDate &#x3D; localStorage.getItem(&#x27;expiration&#x27;);
    const secondsTotal &#x3D; ( new Date(expirationDate).getTime() - now.getTime() ) / 1000;
    const minutes &#x3D; Math.floor(secondsTotal / 60);
    const seconds &#x3D; Math.floor(secondsTotal - minutes * 60);
    this.userInfo &#x3D; &#x27;Session expires in &#x27; + minutes + &#x27; min and &#x27; + seconds + &#x27; sec&#x27;;
    if ( expirationDate &amp;&amp; new Date(expirationDate).getTime() - now.getTime() &gt; 0) {

      if ( minutes &#x3D;&#x3D;&#x3D; 59 &amp;&amp; seconds &#x3D;&#x3D;&#x3D; 59 ) {
        this.snackBarOpen &#x3D; true;
        setTimeout(() &#x3D;&gt; {
          this.snackBarOpen &#x3D; false;
        }, 2000);
        this.snackBar2.open( &#x27;Session extended successfully&#x27;, &#x27;ok&#x27;,
          {
            duration: 2000
          });
      }

      if ( minutes &lt; 5 &amp;&amp; !this.snackBarOpen) {
        this.snackBarOpen &#x3D; true;
        this.openExtendSessionBar();
      } else if ( minutes &gt; 5 &amp;&amp; !this.snackBarOpen ) {
        this.snackBar.dismiss();
      }

    }
  }

  /**
   * This material snackbar is opened to display if a paage has been saved or not
   * */
  openSnackBar() {
    this.snackBar.openFromComponent(PizzaPartyComponent, {
      duration: 3000,
    });
  }

  /**
   * This material snackbar is opened when the session of a user is close to
   * expiring
   * */
  openExtendSessionBar() {
    this.snackBar.openFromComponent(ExtendSessionComponent, {
      duration: 100000,
    });
  }

  publishPageOrMakePagePrivate( published: boolean ) {

    /**
     * This part of the function publishes all queries
     * */
    for ( const queryId of this.page.queries ) {
      this.queryService.getQuery(queryId)
        .subscribe(
          (query) &#x3D;&gt; {
            if ( query.query.method &#x3D;&#x3D;&#x3D; &#x27;JSON&#x27; ) {
              /**
               * The query that is from type &#x27;JSON&#x27;, which means that this
               * query requests data from mongodb, contains the mongodb id
               * of the bson entry at the end of the query.serverUrl part.
               * This part is queried in the following 2 lines.
               * */
              let splittedString &#x3D; query.query.serverUrl.split(&#x27;/&#x27;);
              splittedString &#x3D; splittedString[ splittedString.length - 1 ];
              this.requestService.publishJSON( splittedString, published )
                .subscribe(
                  (json) &#x3D;&gt; {
                    console.log( json );
                  }, error1 &#x3D;&gt; {
                    console.log( error1 );
                  }
                );
            }
          }, error1 &#x3D;&gt; {
            console.log( error1 );
          }
        );
      this.queryService.publishQuery(queryId, published)
        .subscribe(
          (response) &#x3D;&gt; {
            console.log( response );
          }, error &#x3D;&gt; {
            console.log( error );
          });
    }

    /**
     * The following part publishes / makes private the page and the action
     * */
    this.pageIsPublished &#x3D; published;
    this.page.published &#x3D; published;
    console.log( this.action );
    this.action.published &#x3D; published;
    this.page.showAppTitlesOnPublish &#x3D; this.showAppTitlesOnPublish;
    this.page.showAppSettingsOnPublish &#x3D; this.showAppSettingsOnPublish;
    this.page.showInseriLogoOnPublish &#x3D; this.showInseriLogoOnPublish;
    this.page.showDataBrowserOnPublish &#x3D; this.showDataBrowserOnPublish;
    this.updatePage();
    this.action.id &#x3D; this.action._id;
    this.actionService.updateAction(this.action)
      .subscribe((action) &#x3D;&gt; {
        console.log(action);
      });
  }

  logout() {
    this.authService.logout();
    this.router.navigate([&#x27;/&#x27;]);
  }

  /**
   * When clicking on a publish option on the publish expansion panel,
   * this function automatically updates this information in mongodb
   * */
  updatePagePublishSettings() {
    setTimeout(() &#x3D;&gt; {
      this.page.showAppTitlesOnPublish &#x3D; this.showAppTitlesOnPublish;
      this.page.showAppSettingsOnPublish &#x3D; this.showAppSettingsOnPublish;
      this.page.showInseriLogoOnPublish &#x3D; this.showInseriLogoOnPublish;
      this.page.showDataBrowserOnPublish &#x3D; this.showDataBrowserOnPublish;
      this.updatePage();
    }, 2000);
  }

  openAssignInputDialog( input: any ) {
    console.log( input, this.openAppsInThisPage );
    this.pageService.updatePage(
      { ...this.page }
    )
      .subscribe(
        data &#x3D;&gt; {
          // this.updateOpenAppsInThisPage();
          const dialogRef &#x3D; this.dialog.open(AppInputComponentComponent, {
            width: &#x27;50%&#x27;,
            height: &#x27;50%&#x27;,
            data: {
              appHash: input.hash,
              page: this.page,
              inputs: this.openAppsInThisPage[ input.type ].inputs
            }
          });
          dialogRef.afterClosed().subscribe((result) &#x3D;&gt; {
            console.log( result );
            if ( result &#x3D;&#x3D;&#x3D; &#x27;openDataMGMT&#x27; ) {
              this.openDataManagement();
            } else if ( result &#x3D;&#x3D;&#x3D; &#x27;reload&#x27; ) {
              window.location.reload();
            }
          });
        }, error1 &#x3D;&gt; console.log(error1)
      );

  }

  reloadVariablesFunction() {
    // console.log(&#x27;test&#x27;);
    this.updatePage( true );
  }

  @HostListener(&#x27;window:resize&#x27;, [&#x27;$event&#x27;])
  onResize(event) {
    this.innerWidth &#x3D; window.innerWidth;
    // console.log( this.innerWidth );
  }

  switchAppTilePosition( currentPosition: number, nextPosition: number ) {
    const helpVariable &#x3D; this.openAppArray[currentPosition];
    this.openAppArray[ currentPosition ] &#x3D; this.openAppArray[ nextPosition ];
    this.openAppArray[ nextPosition ] &#x3D; helpVariable;
    this.updatePage();
  }

  updateTilePage() {
    this.page.tiles &#x3D; !this.page.tiles;
  }

  minimizeApp( openAppArrayIndex: number, app: any ) {
    const dialogRef &#x3D; this.minimizePasswordDialog.open(MinimizePasswordDialog, {
      width: &#x27;500px&#x27;,
      data: {
        password: undefined
      }
    });

    dialogRef.afterClosed().subscribe(result &#x3D;&gt; {
      if ( result &amp;&amp; result.data.password ) {
        this.openAppArray[ openAppArrayIndex ].password &#x3D; result.data.password;
        this.page.openApps[ app.hash ].password &#x3D; result.data.password;
        setTimeout(() &#x3D;&gt; {
          this.setAppToMinimized( openAppArrayIndex, app );
        }, 500);
      } else {
        this.openAppArray[ openAppArrayIndex ].password &#x3D; undefined;
        this.page.openApps[ app.hash ].password &#x3D; undefined;
        setTimeout(() &#x3D;&gt; {
          this.setAppToMinimized( openAppArrayIndex, app );
        }, 500);
      }
    });
  }

  setAppToMinimized( openAppArrayIndex, app ) {
    this.openAppArray[ openAppArrayIndex ].minimized &#x3D; true;
    this.page.openApps[ app.hash ].minimized &#x3D; true;
    this.page.openApps[ app.hash ].minimize &#x3D; true;
    this.updatePage();
  }

  addDuplicatedPage() {
    const dialogRef &#x3D; this.dialog.open(PageListDialogComponent, {
      width: &#x27;90%&#x27;,
      height: &#x27;40%&#x27;,
      data: {
        showDuplicateButton: true
      }
    });
    dialogRef.afterClosed().subscribe((result) &#x3D;&gt; {
      console.log(result);
      this.pageService.duplicatePage( result, this.action.hasPageSet._id )
        .subscribe(
          data &#x3D;&gt; {
            this.alreadyLoaded &#x3D; false;
            this.generateNavigation(this.actionID);
            console.log( this.pagesOfThisActtion );
          }, error &#x3D;&gt; console.log( error )
        );
    });
  }

  linkExistingPage() {
    const dialogRef &#x3D; this.dialog.open(PageListDialogComponent, {
      width: &#x27;90%&#x27;,
      height: &#x27;40%&#x27;,
      data: {
        showDuplicateButton: true
      }
    });
    dialogRef.afterClosed().subscribe((result) &#x3D;&gt; {
      console.log( &#x27;Link existing &#x27; + result );
      this.pageService.linkExistingPage( result, this.action.hasPageSet._id )
        .subscribe(
          data &#x3D;&gt; {
            this.alreadyLoaded &#x3D; false;
            this.generateNavigation(this.actionID);
          }, error &#x3D;&gt; console.log( error )
        );
    });
  }

  onThemeChange() {
    const chosenTheme &#x3D; this.theme &#x3D;&#x3D;&#x3D; &#x27;none&#x27; ? &#x27;dark-theme&#x27; : &#x27;none&#x27;;
    this.theme &#x3D; chosenTheme;
    localStorage.setItem( &#x27;theme&#x27;, chosenTheme );
  }

  appMenu(app: any, key: string) {
    app[ key ] &#x3D; true;
    setTimeout(() &#x3D;&gt; {
      app[ key ] &#x3D; false;
    }, 100);
  }

  toggleShowInAppSettings(app: any, index: number) {
    this.openAppArray[index][&#x27;showSettings&#x27;] &#x3D; !this.openAppArray[index][&#x27;showSettings&#x27;] ;
    if (!this.openAppArray[index][&#x27;showSettings&#x27;]) { // RELOAD variables if settings are closed
      this.reloadVariables &#x3D; true;
    }
  }

  publishAsTemplate() {
    this.pageService.publishAsTemplate( this.page._id )
      .subscribe(
        response &#x3D;&gt; {
          console.log( response );
        }, error &#x3D;&gt; console.log( error )
      );
    console.log( &#x27;publish as template&#x27; );
  }

  undoPublishTemplate() {
    this.pageService.undoPublishTemplate( this.page._id )
      .subscribe(
        response &#x3D;&gt; {
          console.log( response );
        }, error &#x3D;&gt; console.log( error )
      );
  }
  addProfilePhoto($event: Event) {
    this.templatePhoto &#x3D; (event.target as HTMLInputElement).files[0];
    // const reader &#x3D; new FileReader();
    // reader.onload &#x3D; () &#x3D;&gt; {
    //   this.imagePreview &#x3D; reader.result as string;
    // };
    // reader.readAsDataURL(this.templatePhoto);
    this.pageService.addProfilePhotoForTemplate( this.page._id, this.templatePhoto).subscribe(
      response &#x3D;&gt; {
        console.log( response );
      }, error &#x3D;&gt; console.log( error )
    );
  }
  checkIfShortNameExist( shortName: string ) {
    console.log( shortName );
    this.actionService.checkIfShortNameExist( shortName )
      .subscribe(
        response &#x3D;&gt; {
          console.log( response );
          this.shortNameExist &#x3D; ( response as any ).exist;
          this.shortName &#x3D; shortName;
        }, e &#x3D;&gt; console.log( e )
      );
  }
  setShortName() {
    console.log( &#x27;Set shortname&#x27;, this.shortName );
    this.actionService.setShortName( this.shortName, this.action._id )
      .subscribe(
        response &#x3D;&gt; {
          console.log( response );
        }, e &#x3D;&gt; console.log( e )
      );
  }

  getSubPage(page) {
    let targetPage;
    for (let i &#x3D; 0; i &lt; this.subPagesOfPage.length; i++) {
      // console.log(this.subPagesOfPage[i]);
      targetPage &#x3D; this.getPageFromHierarchy(page, this.subPagesOfPage[i]);
      if (targetPage !&#x3D;&#x3D; null) {
        return targetPage;
      }
    }
    return targetPage;
  }
  getPageFromHierarchy(page, current) {
    let result;
    if (!current || current.length &#x3D;&#x3D;&#x3D; 0) {
      return null;
    }
    if (page &amp;&amp; page._id &#x3D;&#x3D;&#x3D; current.page._id ) {
      return current;
    }
    if (current.subPages !&#x3D;&#x3D; null &amp;&amp; current.subPages.length !&#x3D;&#x3D; 0 &amp;&amp; page) {
      for (let i &#x3D; 0; i &lt; current.subPages.length; i++) {
        result &#x3D; this.getPageFromHierarchy(page, current[i] );
        if (result !&#x3D;&#x3D; null) {
          return result;
        }
      }
    }
    return null;
  }

  selectSubPages(page: any) {
    const target &#x3D; this.getSubPage(page);
    this.pageService.getAllSubPages(page._id)
      .subscribe(
        response &#x3D;&gt; {
          const tempSubPages &#x3D; (response as any).subPages;
          if (tempSubPages) {
            const subs &#x3D; [] as any;
            for (let i &#x3D; 0; i &lt; tempSubPages.length; i++) {
              subs.push({page: tempSubPages[i], subPages: null});
              target.subPages &#x3D; subs;
              this.selectSubPages(tempSubPages[i]);
            }
          }
        }, error &#x3D;&gt; console.log(error)
      );
  }

  addSubPageToSubPagesArr(parentPage: any, subPage: any) {
    const oldParetnObj &#x3D; this.getSubPage(parentPage);
    if (oldParetnObj.subPages || oldParetnObj.subPages.length !&#x3D;&#x3D; 0) {
      oldParetnObj.subPages.push({page: subPage, subPages: []});
    } else {
      oldParetnObj.subPages &#x3D; [{page: subPage, subPages: []}];
    }
    console.log( this.subPagesOfPage);
  }

  generateBrowserHeight(): string {
    const size &#x3D; window.screen.height - 200;
    return size + &#x27;px&#x27;;
  }

  private updatePagesArray(newSubPagesOfPage: SubPageOfPageModel[]) {
    // result &#x3D; {page: result.page, parentPage: parentPageId}
    // we need to update this.subPagesOfPage
    console.log(newSubPagesOfPage);
      this.subPagesOfPage &#x3D; newSubPagesOfPage;

  }

  addSubPagesEvent() {
    if (this.addSubPages) {
      this.addSubPages &#x3D; false;
    } else {
      this.addSubPages &#x3D; true;
    }
  }

  openMinimizedApp( i: number, app: any, unlock?: boolean ) {
    console.log( app.password );

    if ( app.password !&#x3D;&#x3D; undefined ) {
      const dialogRef &#x3D; this.minimizePasswordDialog.open(MinimizePasswordDialog, {
        width: &#x27;500px&#x27;,
        data: {
          givenPassword: app.password,
          askToUnlock: unlock,
          password: undefined
        }
      });
      dialogRef.afterClosed().subscribe(result &#x3D;&gt; {
        if ( result &#x3D;&#x3D;&#x3D; &#x27;openMinimizedApp&#x27; ) {
          this.openAppArray[ i ].minimized &#x3D; false;
          this.page.openApps[ app.hash ].minimized &#x3D; false;
          this.page.openApps[ app.hash ].minimize &#x3D; false;
          this.updatePage();
        }
      });
    } else {
      this.openAppArray[ i ].minimized &#x3D; false;
      this.page.openApps[ app.hash ].minimized &#x3D; false;
      this.page.openApps[ app.hash ].minimize &#x3D; false;
      this.updatePage();
    }
  }
}
@Component({
  selector: &#x27;minimize-password-dialog&#x27;,
  templateUrl: &#x27;minimize-password-dialog.html&#x27;,
})
export class MinimizePasswordDialog {

  constructor(
    public dialogRef: MatDialogRef&lt;MinimizePasswordDialog&gt;,
    @Inject(MAT_DIALOG_DATA) public data: {
      password: string,
      askToUnlock: boolean,
      givenPassword: string
    }
    ) {}

  submit() {
    console.log(this.data);
    this.dialogRef.close({data: this.data});
  }

  continueWithoutPassword() {
    this.dialogRef.close();
  }

  openApp() {
    this.dialogRef.close( &#x27;openMinimizedApp&#x27; );
  }
}
</code></pre>
    </div>

    <div class="tab-pane fade " id="c-templateData">
        <pre class="line-numbers"><code class="language-html">&lt;div *ngIf&#x3D;&quot;!data.askToUnlock&quot; &gt;
  &lt;h4 mat-dialog-title&gt;optional password&lt;/h4&gt;
  &lt;div mat-dialog-content&gt;
    &lt;mat-form-field&gt;
      &lt;mat-label&gt;please enter password&lt;/mat-label&gt;
      &lt;input matInput [(ngModel)]&#x3D;&quot;data.password&quot;&gt;
    &lt;/mat-form-field&gt;
  &lt;/div&gt;

  &lt;div mat-dialog-actions&gt;
    &lt;!--button mat-button *ngIf&#x3D;&quot;!data.minimized&quot; (click)&#x3D;&quot;submit()&quot;&gt;Save&lt;/button--&gt;
    &lt;button mat-button (click)&#x3D;&quot;submit()&quot;&gt;Set Password&lt;/button&gt;
    &lt;button mat-button (click)&#x3D;&quot;continueWithoutPassword()&quot;&gt;Continue without password&lt;/button&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;div *ngIf&#x3D;&quot;data.askToUnlock&quot;&gt;
  &lt;mat-form-field&gt;
    &lt;mat-label&gt;please enter password&lt;/mat-label&gt;
    &lt;input matInput [(ngModel)]&#x3D;&quot;data.password&quot;&gt;
  &lt;/mat-form-field&gt;
  &lt;button mat-button *ngIf&#x3D;&quot;data.password &#x3D;&#x3D;&#x3D; data.givenPassword&quot; (click)&#x3D;&quot;openApp()&quot;&gt;Open minimized app&lt;/button&gt;

&lt;/div&gt;
</code></pre>
    </div>


    <div class="tab-pane fade " id="c-tree">
        <div id="tree-container"></div>
        <div class="tree-legend">
            <div class="title">
                <b>Legend</b>
            </div>
            <div>
                <div class="color htmlelement"></div><span>Html element</span>
            </div>
            <div>
                <div class="color component"></div><span>Component</span>
            </div>
            <div>
                <div class="color directive"></div><span>Html element with directive</span>
            </div>
        </div>
    </div>

    
</div>

<script src="../js/libs/vis.min.js"></script>
<script src="../js/libs/htmlparser.js"></script>
<script src="../js/libs/deep-iterator.js"></script>
<script>
        var COMPONENT_TEMPLATE = '<div><div *ngIf="!data.askToUnlock" >  <h4 mat-dialog-title>optional password</h4>  <div mat-dialog-content>    <mat-form-field>      <mat-label>please enter password</mat-label>      <input matInput [(ngModel)]="data.password">    </mat-form-field>  </div>  <div mat-dialog-actions>    <!--button mat-button *ngIf="!data.minimized" (click)="submit()">Save</button-->    <button mat-button (click)="submit()">Set Password</button>    <button mat-button (click)="continueWithoutPassword()">Continue without password</button>  </div></div><div *ngIf="data.askToUnlock">  <mat-form-field>    <mat-label>please enter password</mat-label>    <input matInput [(ngModel)]="data.password">  </mat-form-field>  <button mat-button *ngIf="data.password === data.givenPassword" (click)="openApp()">Open minimized app</button></div></div>'
    var COMPONENTS = [{'name': 'AddAppGroupDialogComponent', 'selector': 'app-add-app-group-dialog'},{'name': 'AllAppSelectorsComponent', 'selector': 'app-all-app-selectors'},{'name': 'AngularHandsometableComponent', 'selector': 'app-angular-handsometable'},{'name': 'AppComponent', 'selector': 'app-root'},{'name': 'AppInputComponentComponent', 'selector': 'app-app-input-component'},{'name': 'AudioPlayerComponent', 'selector': 'app-audio-player'},{'name': 'BarChartComponent', 'selector': 'app-bar-chart'},{'name': 'BrowserlingComponent', 'selector': 'app-browserling'},{'name': 'BrushAndZoomComponent', 'selector': 'app-brush-and-zoom'},{'name': 'CalendarComponent', 'selector': 'app-calendar'},{'name': 'CanvasWhiteboardComponent', 'selector': 'app-canvas-whiteboard'},{'name': 'ChordDiagramComponent', 'selector': 'app-chord-diagram'},{'name': 'CommentOnIndicesComponent', 'selector': 'app-comment-on-indices'},{'name': 'CrisprComponent', 'selector': 'app-crispr'},{'name': 'D3tutorialComponent', 'selector': 'app-d3tutorial'},{'name': 'DashboardComponent', 'selector': 'app-dashboard'},{'name': 'DataAssignmentComponent', 'selector': 'app-data-assignment'},{'name': 'DataChooserComponent', 'selector': 'app-data-chooser'},{'name': 'DataListViewComponent', 'selector': 'data-list-view'},{'name': 'DataListViewSettingsComponent', 'selector': 'data-list-view-settings'},{'name': 'DataListViewTableComponent', 'selector': 'data-list-view-table'},{'name': 'DataManagementComponent', 'selector': 'app-data-management'},{'name': 'DeactivateNewsletterComponent', 'selector': 'app-deactivate-newsletter'},{'name': 'DeleteActionComponent', 'selector': 'app-delete-action'},{'name': 'DeletePageComponent', 'selector': 'app-delete-page'},{'name': 'DialogCreateNewPageComponent', 'selector': 'dialog-create-new-page'},{'name': 'DialogOverviewExampleDialog', 'selector': 'dialog-overview-example-dialog'},{'name': 'DialogUserSettingsDialog', 'selector': 'dialog-user-settings-dialog'},{'name': 'DictionaryComponent', 'selector': 'app-dictionary'},{'name': 'DuplicatePageComponent', 'selector': 'app-duplicate-page'},{'name': 'EditActionComponent', 'selector': 'app-edit-action'},{'name': 'EditPageComponent', 'selector': 'app-edit-page'},{'name': 'EditPageSetComponent', 'selector': 'app-update-page-set'},{'name': 'ExtendSessionComponent', 'selector': 'session-component'},{'name': 'FileListDialogComponent', 'selector': 'app-file-list-dialog'},{'name': 'FloatingImageObjectComponent', 'selector': 'app-floating-image-object'},{'name': 'FloatingTextObjectComponent', 'selector': 'app-floating-text-object'},{'name': 'FloatLightTableComponent', 'selector': 'app-float-light-table'},{'name': 'Frame', 'selector': 'popup'},{'name': 'FrameSettingsComponent', 'selector': 'app-frame-settings'},{'name': 'GndLobidComponent', 'selector': 'app-gnd-lobid'},{'name': 'GrapesjsComponent', 'selector': 'app-grapesjs'},{'name': 'GroupedBarChartV2Component', 'selector': 'app-grouped-bar-chart-v2'},{'name': 'HeaderComponent', 'selector': 'app-header'},{'name': 'HierarchicalNavigationNodeComponent', 'selector': 'app-hierarchical-navigation-node'},{'name': 'HierarchicalNavigationRootComponent', 'selector': 'app-hierarchical-navigation-root'},{'name': 'HierarchicalNavigationViewComponent', 'selector': 'app-hierarchical-navigation-view'},{'name': 'HomeComponent', 'selector': 'app-home'},{'name': 'HtmlViewerComponent', 'selector': 'app-html-viewer'},{'name': 'HtmlViewerInnerhtmlComponent', 'selector': 'app-html-viewer-innerhtml'},{'name': 'IframeComponent', 'selector': 'app-iframe'},{'name': 'ImageWithOverlayComponent', 'selector': 'app-image-with-overlay'},{'name': 'ImpressumComponent', 'selector': 'app-impressum'},{'name': 'InitPopupComponent', 'selector': 'app-init-popup'},{'name': 'JoinedTextBlockComponent', 'selector': 'app-joined-text-block'},{'name': 'JoinedTextInnerhtmlComponent', 'selector': 'app-joined-text-innerhtml'},{'name': 'JoinedTextLineComponent', 'selector': 'app-joined-text-line'},{'name': 'JoinedTextLinepartComponent', 'selector': 'app-joined-text-linepart'},{'name': 'JoinedTextMarginComponent', 'selector': 'app-joined-text-margin'},{'name': 'JoinedTextTextwrapperComponent', 'selector': 'app-joined-text-textwrapper'},{'name': 'JoinedTextViewComponent', 'selector': 'app-joined-text-view'},{'name': 'KeyValueComponent', 'selector': 'app-key-value'},{'name': 'KeyValueFormComponent', 'selector': 'app-key-value-form'},{'name': 'KnoraV2ViewerComponent', 'selector': 'app-knora-v2-viewer'},{'name': 'KnoraV2ViewerInnerhtmlComponent', 'selector': 'app-knora-v2-viewer-innerhtml'},{'name': 'LeafletExampleComponent', 'selector': 'app-leaflet-example'},{'name': 'LightTableComponent', 'selector': 'app-light-table'},{'name': 'LightTableMenuComponent', 'selector': 'app-light-table-menu'},{'name': 'LoadLightTableComponent', 'selector': 'app-load-light-table'},{'name': 'LoadVariablesComponent', 'selector': 'app-load-variables'},{'name': 'MachineReasoningComponent', 'selector': 'app-machine-reasoning'},{'name': 'MainComponent', 'selector': 'app-main'},{'name': 'MatCardComponent', 'selector': 'app-mat-card'},{'name': 'MinimizePasswordDialog', 'selector': 'minimize-password-dialog'},{'name': 'MultiLineChartComponent', 'selector': 'app-multi-line-chart'},{'name': 'MyFilesComponent', 'selector': 'app-my-files'},{'name': 'MyMainComponentComponent', 'selector': 'app-my-main-component'},{'name': 'MyPractiseComponentComponent', 'selector': 'app-my-practise-component'},{'name': 'NavigationComponent', 'selector': 'app-navigation'},{'name': 'NavigationComponent', 'selector': 'app-navigation'},{'name': 'NavigationComponent', 'selector': 'app-navigation'},{'name': 'NestedMenu', 'selector': 'app-nested-menu'},{'name': 'NewGjsBoxDialogComponent', 'selector': 'app-new-gjs-box-dialog'},{'name': 'OpenbisLoginComponent', 'selector': 'app-openbis-login'},{'name': 'OurDemoAppComponent', 'selector': 'app-our-demo-app'},{'name': 'OurNewComponentComponent', 'selector': 'app-our-new-component'},{'name': 'PageComponent', 'selector': 'nie-os'},{'name': 'PageListDialogComponent', 'selector': 'app-page-list-dialog'},{'name': 'PageNotFoundComponent', 'selector': 'app-page-not-found'},{'name': 'PageSetLandingPageComponent', 'selector': 'app-page-set-landing-page'},{'name': 'ParzivalFassungComponent', 'selector': 'app-parzival-fassung'},{'name': 'PdfViewerComponent', 'selector': 'app-pdf-viewer'},{'name': 'PieChartComponent', 'selector': 'app-pie-chart'},{'name': 'PieChartV2Component', 'selector': 'app-pie-chart-v2'},{'name': 'PizzaPartyComponent', 'selector': 'snack-bar-component-example-snack'},{'name': 'PrimeEditorComponent', 'selector': 'app-prime-editor'},{'name': 'PythonEnvironmentComponent', 'selector': 'app-python-environment'},{'name': 'QueryAppInputMapComponent', 'selector': 'app-query-app-input-map'},{'name': 'QueryEntryComponent', 'selector': 'app-query-entry'},{'name': 'QueryInformationDialogComponent', 'selector': 'app-query-information-dialog'},{'name': 'QueryListComponent', 'selector': 'app-query-list'},{'name': 'RadialBarchartComponent', 'selector': 'app-radial-barchart'},{'name': 'RaeberNavigationComponent', 'selector': 'app-raeber-navigation'},{'name': 'ReactivateAccountComponent', 'selector': 'app-reactivate-account'},{'name': 'RegisterComponent', 'selector': 'app-register'},{'name': 'RemoveObjectsByIdComponent', 'selector': 'app-remove-objects-by-id'},{'name': 'ResetPasswordComponent', 'selector': 'app-reset-password'},{'name': 'ResponseTreeAppComponent', 'selector': 'response-tree'},{'name': 'ResponseTreeComponent', 'selector': 'app-response-tree'},{'name': 'SankeyComponent', 'selector': 'app-sankey'},{'name': 'SaveLightTableComponent', 'selector': 'app-save-light-table'},{'name': 'ShareLightTableComponent', 'selector': 'app-share-light-table'},{'name': 'SimpleImageAppComponent', 'selector': 'app-simple-image-app'},{'name': 'SpiralBarChartComponent', 'selector': 'app-spiral-bar-chart'},{'name': 'StackedBarChartComponent', 'selector': 'app-stacked-bar-chart'},{'name': 'SubPageListComponent', 'selector': 'app-sub-page-list'},{'name': 'SynopsisComponent', 'selector': 'app-synopsis'},{'name': 'SynopsisObjectManagerComponent', 'selector': 'app-synopsis-object-manager'},{'name': 'SynopsisObjectToolboxComponent', 'selector': 'app-synopsis-object-toolbox'},{'name': 'TextDisplayComponent', 'selector': 'app-text-display'},{'name': 'TextDisplayComponent', 'selector': 'app-text-display'},{'name': 'TextLineComponent', 'selector': 'app-text-line'},{'name': 'TextLineMarginComponent', 'selector': 'app-text-line-margin'},{'name': 'TextlistViewerComponent', 'selector': 'app-textlist-viewer'},{'name': 'TextPageOfWordsComponent', 'selector': 'app-text-page-of-words'},{'name': 'TextRichInnerhtmlComponent', 'selector': 'app-text-rich-innerhtml'},{'name': 'TextSvgViewComponent', 'selector': 'app-text-svg-view'},{'name': 'TextSvgViewWrapperComponent', 'selector': 'app-text-svg-view-wrapper'},{'name': 'TextViewCanvasComponent', 'selector': 'app-text-view-canvas'},{'name': 'TextViewComponent', 'selector': 'app-text-view'},{'name': 'TextViewMetadataComponent', 'selector': 'app-text-view-metadata'},{'name': 'TextViewStructureComponent', 'selector': 'app-text-view-structure'},{'name': 'TextViewToolsComponent', 'selector': 'app-text-view-tools'},{'name': 'ThumbnailbarComponent', 'selector': 'app-thumbnailbar'},{'name': 'TiledImageObjectComponent', 'selector': 'app-tiled-image-object'},{'name': 'TiledLightTableComponent', 'selector': 'app-tiled-light-table'},{'name': 'TiledTextObjectComponent', 'selector': 'app-tiled-text-object'},{'name': 'TreeNavigationComponent', 'selector': 'app-tree-navigation'},{'name': 'UrlParamUpdaterComponent', 'selector': 'app-url-param-updater'},{'name': 'UserGroupComponent', 'selector': 'app-user-group'},{'name': 'YoutubeVideoComponent', 'selector': 'app-youtube-video'}];
    var DIRECTIVES = [{'name': 'DraggableDirective', 'selector': '[appDraggable]'},{'name': 'DraggableStubDirective', 'selector': '[appDraggable]'},{'name': 'FloatDropTargetDirective', 'selector': '[appDropTarget]'},{'name': 'ModifiableDirective', 'selector': '[appModifiable]'},{'name': 'ModifiableStubDirective', 'selector': '[appModifiable]'},{'name': 'SelectableDirective', 'selector': '[appSelectable]'},{'name': 'SelectableStubDirective', 'selector': '[appSelectable]'},{'name': 'SynopsisObjectAnchorDirective', 'selector': '[appSynopsisObjectAnchor]'},{'name': 'TileDropTargetDirective', 'selector': '[appTileDropTarget]'}];
    var ACTUAL_COMPONENT = {'name': 'MinimizePasswordDialog'};
</script>
<script src="../js/tree.js"></script>










                   




                   </div><div class="search-results">
    <div class="has-results">
        <h1 class="search-results-title"><span class='search-results-count'></span> result-matching "<span class='search-query'></span>"</h1>
        <ul class="search-results-list"></ul>
    </div>
    <div class="no-results">
        <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
    </div>
</div>
</div>
               <!-- END CONTENT -->
           </div>
       </div>

       <script>
            var COMPODOC_CURRENT_PAGE_DEPTH = 1;
            var COMPODOC_CURRENT_PAGE_CONTEXT = 'component';
            var COMPODOC_CURRENT_PAGE_URL = 'MinimizePasswordDialog.html';
            var MAX_SEARCH_RESULTS = 15;
       </script>

       <script src="../js/libs/custom-elements.min.js"></script>
       <script src="../js/libs/lit-html.js"></script>
       <!-- Required to polyfill modern browsers as code is ES5 for IE... -->
       <script src="../js/libs/custom-elements-es5-adapter.js" charset="utf-8" defer></script>
       <script src="../js/menu-wc.js" defer></script>

       <script src="../js/libs/bootstrap-native.js"></script>

       <script src="../js/libs/es6-shim.min.js"></script>
       <script src="../js/libs/EventDispatcher.js"></script>
       <script src="../js/libs/promise.min.js"></script>
       <script src="../js/libs/zepto.min.js"></script>

       <script src="../js/compodoc.js"></script>

       <script src="../js/tabs.js"></script>
       <script src="../js/menu.js"></script>
       <script src="../js/libs/clipboard.min.js"></script>
       <script src="../js/libs/prism.js"></script>
       <script src="../js/sourceCode.js"></script>
          <script src="../js/search/search.js"></script>
          <script src="../js/search/lunr.min.js"></script>
          <script src="../js/search/search-lunr.js"></script>
          <script src="../js/search/search_index.js"></script>
       <script src="../js/lazy-load-graphs.js"></script>


    </body>
</html>
